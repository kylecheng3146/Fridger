# ğŸ“˜ Gemini.md â€” Fridger é–‹ç™¼è¦ç¯„æ–‡ä»¶

## ğŸ”§ å°ˆé …æŠ€è¡“ä¸€è¦½

| é¡åˆ¥   | æŠ€è¡“                                          |
| ---- | ------------------------------------------- |
| èªè¨€   | Kotlinï¼ˆMultiplatformï¼‰                       |
| UI   | Compose Multiplatform                       |
| æ¶æ§‹   | MVVM / é—œæ³¨é»åˆ†é›¢ (Separation of Concerns)       |
| è³‡æ–™åº«  | SQLDelight                                  |
| è¨­å®šå„²å­˜ | DataStore                                   |
| æ„å»ºå·¥å…· | Gradle (Kotlin DSL, Version Catalog)        |
| æ”¯æ´å¹³è‡º | Android / iOS / Desktop / WebAssemblyï¼ˆWASMï¼‰ |

---

## ğŸ“ å°ˆé …ç›®éŒ„çµæ§‹èªªæ˜

```plaintext
composeApp/
â”œâ€” src/
â”‚   â”œâ€” commonMain/        <-- å…±ç”¨ç¨‹å¼ç¢¼ï¼ˆUI, ViewModel, Repository ç­‰ï¼‰
â”‚   â”œâ€” androidMain/       <-- Android å¹³è‡ºå¯¦ä½œ
â”‚   â”œâ€” iosMain/           <-- iOS å¹³è‡ºå¯¦ä½œ
â”‚   â”œâ€” desktopMain/       <-- Desktop å¹³è‡ºå¯¦ä½œ
â”‚   â””â€” wasmJsMain/        <-- WebAssembly å¯¦ä½œ
â””â€” build.gradle.kts
```

---

## ğŸ§± å¹³é¢æ¶æ§‹è¦ç¯„

### 1ï¸âƒ£ Data Layer - æ•¸æ“šå±¤

| æ¨¡çµ„                | èªªæ˜                               |
| ----------------- | -------------------------------- |
| `data/database`   | SQLDelight è¨­å®šèˆ‡ schema æª”æ¡ˆï¼ˆ`.sq`ï¼‰  |
| `data/local`      | æœ¬åœ°è³‡æ–™å­˜å–å¯¦ä½œ                         |
| `data/model`      | è³‡æ–™æ¨¡å‹å®šç¾©ï¼ˆä¾‹å¦‚ Ingredientï¼ŒCategory ç­‰ï¼‰ |
| `data/repository` | æŠ½èª¿å‡ºçµ±ä¸€è³‡æ–™å­˜å–ä»‹é¢ï¼Œè™•ç†é€²éšèˆ‡å¤šè³‡æ–™æºæ•´åˆ          |
| `data/settings`   | ä½¿ç”¨ DataStore ç®¡ç†è¨­å®šè³‡æ–™              |

---

## ğŸ’ª é¢¨æ ¼èˆ‡å¯¦ä½œæ¬Šå‰‡ï¼ˆKMP å¯¦å‹™æª¢æŸ¥æ¸…å–®ï¼‰

### ğŸ”¹ Null å®‰å…¨èˆ‡åˆ¤ç©ºï¼ˆè·¨å¹³è‡ºå…±ç”¨é‚è¼¯ï¼‰

- âœ… å…±ç”¨ç¨‹å¼ç¢¼ï¼ˆcommonMainï¼‰æ˜¯å¦å®Œå…¨ Null-safeï¼Ÿæ˜¯å¦é¿å… Nullable å‚³æŸ¥è‡³ UI å±¤ï¼Ÿ
- âœ… æ˜¯å¦å®Œå…¨é¿å…ä½¿ç”¨ `!!` å¼·åˆ¶ unwrapï¼ˆå°¤å…¶ platform APIï¼‰ï¼Ÿ
- âœ… å¤–éƒ¨è³‡æ–™ä¾†æºæ˜¯å¦é€²è¡Œé©ç•¶åˆ¤ç©ºèˆ‡æ ¼å¼é©—è­‰ï¼Ÿ
- ğŸ“Œ expect/actual API è‹¥æ·»åŠ  Nullable å‚³å…¥/å‚³å‡ºï¼Œå¹³è‡ºå¯¦ä½œå±¤éœ€ä¿è­‰ä¸é€ æˆ Null crashã€‚

### ğŸ”¹ å¹³è‡ºç”Ÿå‘½é€±æœŸç®¡ç†

**Android**

- âœ… æ˜¯å¦ä½¿ç”¨ `viewModelScope` / `lifecycleScope` æ§åˆ¶ coroutine ç”Ÿå‘½é€±æœŸï¼Ÿ
- âœ… é¿å…åœ¨ `onCreateView()` ä¹‹å‰æˆ– `onDestroyView()` ä¹‹å¾Œæ›´æ–° UIï¼Ÿ
- âœ… æ˜¯å¦è€ƒæ…® `Configuration Change`ï¼ˆæ–¹å‘è½‰æ›ï¼‰ï¼Ÿ

**iOS**

- âœ… Swift èˆ‡ ViewController æ˜¯å¦å¦‚æ­¤ç®¡ç†è¨˜æ†¶é«”èˆ‡ç”Ÿå‘½é€±æœŸï¼Ÿ
- âœ… ç•°æ­¥ä»»å‹™æ˜¯å¦é¿å…åœ¨ç•«é¢æœªæº–å‚™æ™‚æ›´æ–° UIï¼Ÿ
- âœ… Swift interop æ˜¯å¦ç©©å®šè™•ç† nullable/optionalï¼Ÿ

### ğŸ”¹ Kotlin èªè¨€ç‰¹æ€§æ‡‰ç”¨

- âœ… æ˜¯å¦å–„ç”¨ `let` / `run` / `apply` / `also` æå‡å¯è®€æ€§ï¼Ÿ
- âœ… æ˜¯å¦ä½¿ç”¨ `sealed class` ç®¡ç†ç‹€æ…‹ï¼ˆå¦‚ `UiState`, `ApiResult`ï¼‰ï¼Ÿ
- âœ… æ˜¯å¦ä½¿ç”¨ `data class` ç®¡ç†è³‡æ–™æ¨¡å‹ï¼Ÿ
- âœ… æ˜¯å¦éåº¦ä½¿ç”¨é«˜éšå‡½å¼æˆ–å··å±¤ lambdaï¼Ÿé™ä½ Swift side å¯è®€æ€§ï¼Ÿ
- âœ… Extension function åƒ…é™æ–¼å¹³è‡ºä¸­ç«‹é‚è¼¯ï¼Ÿé¿å…å»¶ä¼¸ iOS å°ˆå±¬è¡Œç‚ºï¼Ÿ

### ğŸ”¹ éåŒæ­¥èˆ‡å”çµ„ (Coroutine / Flow)

- âœ… coroutine æ˜¯å¦æ˜ç¢ºæŒ‡å®š dispatcherï¼Ÿ
- âœ… suspend / Flow API æ˜¯å¦å°è£åœ¨å…±ç”¨å±¤ï¼Ÿ
- âœ… coroutine æ˜¯å¦æœ‰ cancel / timeout æ§åˆ¶ï¼Ÿ
- âœ… try-catch æ˜¯å¦æ­£ç¢ºåŒ…è£ suspend å‡½å¼ï¼Ÿ
- âœ… Android: ä½¿ç”¨ `viewModelScope`ï¼Ÿ
- âœ… iOS: ä½¿ç”¨ `MainScope()` + `rememberCoroutineScope()`ï¼Ÿ

### ğŸ”¹ è³‡æ–™èˆ‡é‚Šç•Œé©—è­‰

- âœ… API å›å‚³è³‡æ–™æ˜¯å¦é€²è¡Œç©ºå€¼ã€æ¬„ä½ç¼ºæ®–æª¢æŸ¥ï¼Ÿ
- âœ… List/Array ä½¿ç”¨æ˜¯å¦å…ˆ `.isEmpty()` æˆ– `index in list.indices`ï¼Ÿ
- âœ… kotlinx.serialization æ˜¯å¦æœ‰è™•ç† nullable/é è¨­å€¼ï¼Ÿ
- âœ… è³‡æ–™åº«/åå¥½è¨­å®šè®€å–æ˜¯å¦é€²è¡Œå®¹éŒ¯èˆ‡é‚è¼¯é˜²å‘Šï¼Ÿ

### ğŸ”¹ UI æ“ä½œèˆ‡æ•ˆèƒ½

**Android**

- âœ… æ˜¯å¦åŠ å…¥é»æ“Š debounce / throttle é˜²é‡è¤‡æäº¤ï¼Ÿ
- âœ… RecyclerView ã€ViewPager ã€LazyColumn æ˜¯å¦æ­£ç¢ºé‡‹æ”¾èˆ‡å›æ”¶è³‡æºï¼Ÿ
- âœ… æ˜¯å¦ä½¿ç”¨ `DiffUtil.ItemCallback` æˆ– `LazyColumn` diffingï¼Ÿ
- âœ… æ˜¯å¦æ¸…é™¤ ViewBinding / å‹•ç•« callbackï¼Ÿ

**iOS**

- âœ… SwiftUI / UIViewController æ˜¯å¦èˆ‡ Coroutine å®‰å…¨äº’å‹•ï¼Ÿ
- âœ… æ˜¯å¦é¿å…åœ¨éä¸»ç·šç·šæ›´æ–°ç•«é¢ï¼Ÿ

### ğŸ”¹ è³‡æºèˆ‡å»ºç½®ä¸€è‡´æ€§

- âœ… æ˜¯å¦æŠ½é›¢æ‰€æœ‰ hardcoded å­—ä¸² / é¡è‰² / å°ºå¯¸è‡³ resource æˆ– constantï¼Ÿ
- âœ… æ‰€æœ‰å…±ç”¨å¸¸æ•¸æ˜¯å¦é›†ä¸­ï¼Ÿ
- âœ… æ˜¯å¦ä½¿ç”¨ `libs.versions.toml` çµ±ä¸€ç®¡ç†æ‰€æœ‰ç‰ˆæœ¬ï¼Ÿ

### ğŸ”¹ æ¸¬è©¦èˆ‡å‚·éŒ¯é™¤éŒ¯

- âœ… å…±ç”¨é‚è¼¯æ˜¯å¦å…·å‚™å–®å…ƒæ¸¬è©¦ï¼ˆkotlin.test, expect mockï¼‰ï¼Ÿ
- âœ… Log è¨Šæ¯æ˜¯å¦é¿å…æ¼éœ²æ©Ÿæ•…è³‡è¨Šï¼Ÿ
- âœ… æ˜¯å¦åŒ…è£ä¸¦æ ¼å¼åŒ–å¹³è‡ºéŒ¯èª¤å †ç–Šèˆ‡éŒ¯èª¤è½‰è­¯ï¼Ÿ

### ğŸ”¹ KMP å°ˆç”¨å»ºè­°

- âœ… å…±ç”¨èˆ‡å¹³è‡ºé‚è¼¯æ˜¯å¦æ˜ç¢ºåˆ†å±¤ï¼Ÿï¼ˆä¸æ··ç”¨ Android / iOS APIï¼‰
- âœ… æ˜¯å¦å–„ç”¨ Kotlin/Native ç”¢ç”Ÿ `.framework` ä¸¦æ­£ç¢ºèˆ‡ SwiftBridge æ•´åˆï¼Ÿ
- âœ… æ˜¯å¦æ³¨æ„ Kotlin/Native concurrency modelï¼ˆé¿å…å…±ç”¨ mutable stateï¼‰ï¼Ÿ
- âœ… æ˜¯å¦ç›£æ§ç”¢å‡º `.framework` é«”ç©èˆ‡å•Ÿå‹•æˆæœ¬ï¼Ÿ

---

ğŸ“Œ æœ¬é–‹ç™¼è¦ç¯„ç›®çš„åœ¨æ–¼ï¼š

1. ç¶­æŒçµ±ä¸€çš„ç¨‹å¼é¢¨æ ¼èˆ‡æ¶æ§‹é‚è¼¯
2. ä¿ƒé€²è·¨å¹³è‡ºåœ˜éšŠå”ä½œèˆ‡ç¨‹å¼ç¢¼å¯ç¶­è­·æ€§
3. å¼·åŒ–æ¨¡çµ„åˆ†å·¥èˆ‡æ¸¬è©¦å°ˆå‘é–‹ç™¼ç²¾ç¥

é–‹ç™¼äººå“¡æ‡‰éµå¾ªæœ¬è¦ç¯„é€²è¡Œå¯¦ä½œï¼Œ

